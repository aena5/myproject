08:19:10  START Executing for: 'TEST_DB/postgres' [PostgreSQL], Database: postgres, Schema: public
08:19:10  SUCCESS  [DROP - 0 rows, 0.029 secs]  OK. No rows were affected  
DROP TABLE IF EXISTS person;
08:19:10  SUCCESS  [DROP - 0 rows, 0.003 secs]  OK. No rows were affected  
DROP TYPE IF EXISTS gender_type;
08:19:10  SUCCESS  [CREATE - 0 rows, 0.003 secs]  OK. No rows were affected  
CREATE TYPE gender_type AS ENUM('MALE','FEMALE');
08:19:10  SUCCESS  [CREATE - 0 rows, 0.013 secs]  OK. No rows were affected  
CREATE TABLE person(
   id SERIAL PRIMARY KEY,
   first_name VARCHAR(50),
   last_name VARCHAR(50),
   birth_date DATE,
   gender gender_type,
   salary NUMERIC(400,2) CONSTRAINT salary_nonnegative CHECK (salary >= 0)
);
08:19:10  SUCCESS  [COMMENT - 0 rows, 0.002 secs]  OK. No rows were affected  
comment on column person.id is 'unique numerical value which automatically increments after a new record is inserted';
08:19:10  SUCCESS  [COMMENT - 0 rows, 0.001 secs]  OK. No rows were affected  
comment on column person.first_name is 'first name of the person; max length of 50';
08:19:10  SUCCESS  [COMMENT - 0 rows, 0.001 secs]  OK. No rows were affected  
comment on column person.last_name  is 'last name of the person; max length of 50';
08:19:10  SUCCESS  [COMMENT - 0 rows, 0.001 secs]  OK. No rows were affected  
comment on column person.birth_date is 'date of birth of the person';
08:19:10  SUCCESS  [COMMENT - 0 rows, 0.001 secs]  OK. No rows were affected  
comment on column person.gender     is 'indicates whether the person is MALE or FEMALE';
08:19:10  SUCCESS  [COMMENT - 0 rows, 0.001 secs]  OK. No rows were affected  
comment on column person.salary     is 'salary of person; should support up to 2 decimal points; negative value is not allowed';
08:19:10  SUCCESS  [INSERT - 2 rows, 0.002 secs]  OK  
INSERT INTO 
   person (first_name, last_name, birth_date, gender, salary)
VALUES 
   ('John','Doe','01-JAN-2020','MALE',10000.50),
   ('Mary','Jane','29-FEB-2020','FEMALE',5000.12);
08:19:10  SUCCESS  [INSERT - 1,000,000 rows, 15.869 secs]  OK  
insert into person(
    first_name, last_name, birth_date, gender, salary
)
select
(ARRAY['Aiden','Anika','Ariya','Ashanti','Avery',
'Cameron','Ceri','Che','Danica','Darcy',
'Dion','Eman','Eren','Esme','Frankie',
'Gurdeep','Haiden','Indi','Isa','Jaskaran',
'Jaya','Jo ','Jodie','Kacey','Kameron',
'Kayden','Keeley','Kenzie','Lucca','Macauley',
'Manraj','Nur','Oluwatobiloba','Reiss','Riley',
'Rima','Ronnie','Ryley','Sam','Sana',
'Shola','Sierra','Tamika','Taran','Teagan',
'Tia','Tiegan','Virginia','Zhane','Zion'])[floor(random()*50)+1],
(ARRAY['Ahmad','Andersen','Arias','Barlow','Beck'
'Bloggs','Bowes','Buck','Burris','Cano'
'Chaney','Coombes','Correa','Coulson','Craig'
'Frye','Hackett','Hale','Huber','Hyde'
'Irving','Joyce','Kelley','Kim','Larson'
'Lynn','Markham','Mejia','Miranda','Neal'
'Newton','Novak','Ochoa','Pate','Paterson'
'Pennington','Rubio','Santana','Schaefer','Schofield'
'Shaffer','Sweeney','Talley','Trevino','Tucker'
'Velazquez','Vu','Wagner','Walton','Woodward'])[floor(random()*40)+1],
timestamp '1970-01-01' + random() * (timestamp '1970-01-01' - timestamp '2070-12-31'),
(ARRAY['FEMALE', 'MALE'])[floor(random()*2)+1]::gender_type,
floor(random()*(100000.00-1.00+1))+1.00
from generate_series(1, 1000000);
08:19:26  WARNING  [COMMIT - 0 rows, 0.005 secs]  OK. No rows were affected
SQLWarning: 
SQL State: 25P01 --- there is no transaction in progress  
commit;
08:19:26  SUCCESS  [EXPLAIN - 6 rows, 0.304 secs]  Result set fetched  
--PRE-A)
EXPLAIN (ANALYZE, BUFFERS) select * 
  from person
 where first_name = 'John'
   and last_name = 'Doe';
08:19:26  SUCCESS  [EXPLAIN - 6 rows, 0.448 secs]  Result set fetched  
--PRE-B)
EXPLAIN (ANALYZE, BUFFERS) select * 
  from person
 where gender = 'FEMALE'
   and salary > 5000.50
   and birth_date >= (TIMESTAMP 'epoch' + 946684800 * INTERVAL '1 second') 
   and birth_date <= (TIMESTAMP 'epoch' + 1609372800 * INTERVAL '1 second');
08:19:27  SUCCESS  [EXPLAIN - 11 rows, 7.390 secs]  Result set fetched  
--PRE-C)
EXPLAIN (ANALYZE, BUFFERS) select count(1), gender, round(salary, 3)
   from person
  group by 2,3;
08:19:34  WARNING  [DROP - 0 rows, 0.001 secs]  OK. No rows were affected
SQLWarning: 
SQL State: 00000 --- index "person_name_idx" does not exist, skipping  
DROP INDEX IF EXISTS person_name_idx;
08:19:34  WARNING  [DROP - 0 rows, 0.002 secs]  OK. No rows were affected
SQLWarning: 
SQL State: 00000 --- index "person_other_info_idx" does not exist, skipping  
DROP INDEX IF EXISTS person_other_info_idx;
08:19:34  WARNING  [DROP - 0 rows, 0.002 secs]  OK. No rows were affected
SQLWarning: 
SQL State: 00000 --- index "person_gender_sal_idx" does not exist, skipping  
DROP INDEX IF EXISTS person_gender_sal_idx;
08:19:34  SUCCESS  [CREATE - 0 rows, 9.778 secs]  OK. No rows were affected  
CREATE INDEX person_name_idx ON person (first_name, last_name);
08:19:44  SUCCESS  [CREATE - 0 rows, 6.003 secs]  OK. No rows were affected  
CREATE INDEX person_other_info_idx ON person (gender, salary, birth_date);
08:19:50  SUCCESS  [CREATE - 0 rows, 2.982 secs]  OK. No rows were affected  
CREATE INDEX person_gender_sal_idx ON person (salary, gender);
08:19:53  SUCCESS  [ANALYZE - 0 rows, 0.701 secs]  OK. No rows were affected  
ANALYZE person;
08:19:54  SUCCESS  [EXPLAIN - 5 rows, 0.003 secs]  Result set fetched  
--POST-A)
EXPLAIN (ANALYZE, BUFFERS) select * 
  from person
 where first_name = 'John'
   and last_name = 'Doe';
08:19:54  SUCCESS  [EXPLAIN - 5 rows, 0.214 secs]  Result set fetched  
--POST-B)
EXPLAIN (ANALYZE, BUFFERS) select * 
  from person
 where gender = 'FEMALE'
   and salary > 5000.50
   and birth_date >= (TIMESTAMP 'epoch' + 946684800 * INTERVAL '1 second') 
   and birth_date <= (TIMESTAMP 'epoch' + 1609372800 * INTERVAL '1 second');
08:19:54  SUCCESS  [EXPLAIN - 11 rows, 4.339 secs]  Result set fetched  
--POST-C.1)
EXPLAIN (ANALYZE, BUFFERS) select count(1), gender, round(salary, 3)
   from person
  group by 3, 2;
08:19:59  SUCCESS  [EXPLAIN - 8 rows, 2.155 secs]  Result set fetched  
--POST-C.2)
EXPLAIN (ANALYZE, BUFFERS) select count(1), gender, round(salary, 3)
from person
group by gender, salary;
08:20:01  END Execution 27 statement(s) executed, 1,000,054 row(s) affected, exec/fetch time: 50.253/0.001 secs   [27 successful, 4 Warnings, 0 errors]
